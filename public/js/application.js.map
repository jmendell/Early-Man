{"version":3,"sources":["app.js","bind-events.js","card-profiles.js","upload.js","utils.js","word-fitler.js","words.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"application.js","sourcesContent":["$app = {};\n\n$app.init = function () {\n\t$app.canvas = new fabric.Canvas('c', { preserveObjectStacking: true }),\n\t$app.degree = 0,\n\t$app.height = 0,\n\t$app.width = 0,\n\t$app.canvasHeight = 900,\n\t$app.canvasWidth = 900,\n\t$app.topOffset = 238,\n\t$app.maxChars = 50,\n\t$app.design = $('body').data('design'),\n\t$app.text = new fabric.Textbox('', {\n\t\tfontSize: 36,\n\t\tfontFamily:\"EarlyMan-Regular\"\n\t});\n\t$app.card = executeFunctionByName('cards.card' + $app.design, $app);\n\t$app.placeholder = $('#content-input').val(),\n\t$app.canvas.add($app.text);\n\t$app.text.setText($app.placeholder);\n\t$app.canvas.bringToFront($app.text);\n\t$app.canvas.setHeight($app.canvasHeight);\n\t$app.canvas.setWidth($app.canvasWidth);\n\n\t$app.drawBase();\n\t$app.bindInput();\n\n\t$app.canvas.renderAll();\n}\n\n$app.drawBase = function () {\n\n\tfabric.Image.fromURL($app.baseUrl, function(oImg) {\n\t\toImg.set({\n\t\t\tleft:0,\n\t\t\tbottom:0,\n\t\t\twidth:$app.canvasWidth,\n\t\t\theight:$app.canvasHeight,\n\t\t\tselectable:false,\n\t\t\tevented:false\n\t\t});\n\n\t\t$app.cardImage = oImg;\n\n\t\t$app.canvas.sendToBack(oImg);\n\t});\n}\n\n$app.bindInput = function () {\n\t$('#content-input').on('keyup', function(){\n\t\tif (containsProfanity($(this).val())) {\n\t\t\t$app.updateText('Innapropriate language');\n\t\t}else{\n\t\t\t$app.updateText($(this).val());\n\t\t\t$app.updateCounter();\n\t\t}\n\t});\n}\n\n$app.updateText = function (val) {\n\t$app.text.setText(val);\n\t$app.canvas.renderAll();\n}\n\n$app.resetImage = function () {\n\tsetTimeout(function(){\n\t\t$app.canvas.remove($app.cardImage);\n\t}, 400);\n}\n\n$app.newCard = function () {\n\t$(document).on('click', '.card-item', function(){\n\n\t\tvar design = $(this).data('design');\n\t\t$('body').data('design', design);\n\n\t\t$app.design = design;\n\t\t$app.card = executeFunctionByName('cards.card' + $app.design, $app);\n\t\t$app.drawBase();\n\t\t$app.canvas.renderAll();\n\t\t\n\t});\n}\n\n$app.updateCounter = function () {\n\tvar remainingChars = $app.maxChars - $app.text.text.length;\n\t$('#charCount').text(remainingChars);\n\n\tif (remainingChars <= 0) {\n\t\t$('#charCount').addClass('warn');\n\t\t$('#finalize-creation').attr('disabled', 'true');\n\t}else{\n\t\t$('#charCount').removeClass('warn');\n\t\t$('#finalize-creation').removeAttr('disabled');\n\t}\n}\n\n$app.centerText = function () {\n\tvar canvasRemainder = $app.canvasHeight - $app.topOffset;\n\tvar top = $app.topOffset + (canvasRemainder / 2) - ($app.text.height / 2);\n\tvar left = ($app.canvasWidth / 2) - ($app.text.width / 2);\n\t$app.text.setTop(top);\n\t$app.text.setLeft(left);\n\t$app.canvas.renderAll();\n}\n\n$app.saveImage = function () {\n\tvar imgData = $app.canvas.toDataURL({format:'jpeg', quality:0.9});\n\treturn imgData;\n}\n\n$app.loadingCues = function () {\n\t$('.progress-section').slideDown();\n\t$('#finalize-creation').attr('disabled', 'true');\n\tsetTimeout(function(){\n\t\tsetProgress(40);\n\t}, 400);\n}\n\n$app.finalize = function () {\n\n\tvar img = $app.saveImage();\n\n\t$app.loadingCues();\n\n\t$app.uploadImage(img, function (res){\n\t\tpreloadImage(Cookies.get('card'), function(){\n\t\t\tsetProgress(100);\n\t\t\t$app.presentation(res);\n\t\t})\n\t});\n\n}\n\n$app.presentation = function (res) {\n\t\n\tga('set', 'page', 'presentation');\n\n\t$('.dynamic-content').fadeOut(500, function() {\n\t\t$(this).html(res);\n\t\tregisterEvent('presentation');\n\t\t$('body').attr('class', '');\n\t\t$('body').addClass('presentation');\n\t}).fadeIn(500);\n}\n","$(window).on('create', function(){\n\t$app.init();\n});\n\n$(document).on('click', '#finalize-creation', function(){\n\t$app.finalize();\n});\n\n$(document).on('click', '#reset-image', function(){\n\t$app.resetImage();\n\t$app.newCard();\n});","$app.cards = {};\n\n$app.cards = {\n\tcard1 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-1.jpg\";\n\t\t$app.text.width = 400;\n\t\t$app.text.top = 400;\n\t\t$app.text.left = 50;\n\t\t$app.text.fill = \"#000\";\n\t\t$app.text.textAlign = \"left\";\n\t},\n\tcard2 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-2.jpg\";\n\t\t$app.text.width = 350;\n\t\t$app.text.top = 50;\n\t\t$app.text.left = 25;\n\t\t$app.text.fill = \"#0D2842\";\n\t\t$app.text.textAlign = \"left\";\n\t},\n\tcard3 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-3.jpg\";\n\t\t$app.text.width = 850;\n\t\t$app.text.top = 725;\n\t\t$app.text.left = 500;\n\t\t$app.text.fill = \"#000\";\n\t\t$app.text.textAlign = \"left\";\n\t},\n\tcard4 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-4.jpg\";\n\t\t$app.text.width = 800;\n\t\t$app.text.top = 650;\n\t\t$app.text.left = 50;\n\t\t$app.text.fill = \"#fff\";\n\t\t$app.text.textAlign = \"right\";\n\t},\n\tcard5 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-5.jpg\";\n\t\t$app.text.width = 850;\n\t\t$app.text.top = 650;\n\t\t$app.text.left = 50;\n\t\t$app.text.fill = \"#fff\";\n\t\t$app.text.textAlign = \"left\";\n\t},\n\tcard6 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-6.jpg\";\n\t\t$app.text.width = 400;\n\t\t$app.text.top = 600;\n\t\t$app.text.left = 500;\n\t\t$app.text.fill = \"#fff\";\n\t\t$app.text.textAlign = \"left\";\n\t},\n\tcard7 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-7.jpg\";\n\t\t$app.text.width = 850\n\t\t$app.text.top = 650;\n\t\t$app.text.left = 50;\n\t\t$app.text.fill = \"#fff\";\n\t\t$app.text.textAlign = \"left\";\n\t},\n\tcard8 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-8.jpg\";\n\t\t$app.text.width = 600;\n\t\t$app.text.top = 50;\n\t\t$app.text.left = 50;\n\t\t$app.text.fill = \"#0D2842\";\n\t\t$app.text.textAlign = \"left\";\n\t},\n\tcard9 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-9.jpg\";\n\t\t$app.text.width = 800;\n\t\t$app.text.top = 700;\n\t\t$app.text.left = 50;\n\t\t$app.text.fill = \"#fff\";\n\t\t$app.text.textAlign = \"left\";\n\t},\n\tcard10 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-10.jpg\";\n\t\t$app.text.width = 800;\n\t\t$app.text.top = 350;\n\t\t$app.text.left = 85;\n\t\t$app.text.fill = \"#fff\";\n\t\t$app.text.textAlign = \"center\";\n\t},\n\tcard11 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-11.jpg\";\n\t\t$app.text.width = 800;\n\t\t$app.text.top = 700;\n\t\t$app.text.left = 150;\n\t\t$app.text.fill = \"#000\";\n\t\t$app.text.textAlign = \"center\";\n\t},\n\tcard12 : function () {\n\t\t$app.baseUrl = \"/images/cards/card-12.jpg\";\n\t\t$app.text.width = 350;\n\t\t$app.text.top = 25;\n\t\t$app.text.left = 25;\n\t\t$app.text.fill = \"#fff\";\n\t\t$app.text.textAlign = \"left\";\n\t}\n}","$app.uploadImage = function (data, callback) {\n\tvar token = $('input[name=_token]').val();\n\t$.ajax({\n\t\tmethod: \"POST\",\n\t\turl: \"/presentation\",\n\t\tdata: { \n\t\t\tdata: data,\n\t\t\t\"_token\": token\n\t\t}\n\t}).done(function( res ) {\n\t\tcallback(res);\n\t\tsetProgress(90);\n\t});\n};","function registerEvent(event) {\n    var evt = new CustomEvent(event);\n\n    window.dispatchEvent(evt);\n}\n\nfunction preloadImage (url, callback) {\n\tvar img = new Image();\n\timg.src = url;\n\n\timg.onload = function() {\n\t\tcallback();\n\t}\n}\n\nfunction executeFunctionByName(functionName, context) {\n  var args = [].slice.call(arguments).splice(2);\n  var namespaces = functionName.split(\".\");\n  var func = namespaces.pop();\n  for(var i = 0; i < namespaces.length; i++) {\n    context = context[namespaces[i]];\n  }\n  return context[func].apply(context, args);\n}\n\nfunction registerEvent(event) {\n    var evt = new CustomEvent(event);\n\n    window.dispatchEvent(evt);\n}\n\nfunction setProgress (percent) {\n  var value = percent + '%';\n  $('.progress-inner').css('width', value);\n}","String.prototype.contains = function(str) { return this.indexOf(str) != -1; };\n\nvar containsProfanity = function(text){\n    var returnVal = false; \n    for (var i = 0; i < profanities.length; i++) {\n        if(text.toLowerCase().contains(profanities[i].toLowerCase())){\n            returnVal = true;\n            break;\n        }\n    }\n    return returnVal;\n}","var profanities = new Array(\n    'fuck',\n    'cock',\n    'pussy',\n    'dick',\n    'shit',\n    'cunt',\n    'penis',\n    'vagina',\n    'nigger'\n);"]}